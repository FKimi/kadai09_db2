<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>balubo - ログイン</title>
    <link rel="stylesheet" href="signup.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <header>
        <a href="/" class="logo">balubo</a>
    </header>

    <main>
        <form action="login_process.php" method="POST" class="signup-container">
            <section class="welcome-section">
                <h1>おかえりなさい！</h1>
                <p>~~~</p>
            </section>

            <section class="signup-section">
                <div class="signup-box">
                    <h2>ログイン</h2>
                    <p class="login-link">アカウントをお持ちでない方は<a href="input.php">新規登録</a>へ</p>

                    <!-- Google認証ボタン -->
                    <button id="login" class="social-btn google">
                        <img src="./img/googleicon.jpg" alt="">
                        <span>Googleでログイン</span>
                    </button>

                    <div class="divider">または</div>

                    <div class="form-group">
                        <input type="email" name="email" placeholder="メールアドレス" required>
                    </div>
                    <div class="form-group">
                        <input type="password" name="pw" placeholder="パスワード" required>
                    </div>

                    <button type="submit" class="submit-btn">ログイン</button>
                </div>
            </section>
        </form>
    </main>

    <!-- Firebase関連のスクリプト -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider } 
        from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBivhvk5LOdAzfIVQD6WgtZSnPBtR8VpKk",
            authDomain: "port-f8f77.firebaseapp.com",
            projectId: "port-f8f77",
            storageBucket: "port-f8f77.firebasestorage.app",
            messagingSenderId: "885240223225",
            appId: "1:885240223225:web:170905f2e79d8b5f4a5928"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        // LOGINボタンのクリックイベント
        $("#login").on("click", function() {
            signInWithPopup(auth, provider)
            .then((result) => {
                // ログイン成功時、メイン画面にリダイレクト
                window.location.href = 'memo.html';
            })
            .catch((error) => {
                console.error("ログインエラー：", error);
            });
        });
    </script>
</body>
</html>